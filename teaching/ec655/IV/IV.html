<!DOCTYPE html>
<html lang="en"><head>
<script src="IV_files/libs/clipboard/clipboard.min.js"></script>
<script src="IV_files/libs/quarto-html/tabby.min.js"></script>
<script src="IV_files/libs/quarto-html/popper.min.js"></script>
<script src="IV_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="IV_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="IV_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="IV_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.1.189">

  <meta name="author" content="Justin Smith">
  <title>Instrumental Variables</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="IV_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="IV_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="IV_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="IV_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="IV_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="IV_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="IV_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="IV_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="IV_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#43464B" class="center">
  <h1 class="title">Instrumental Variables</h1>
  <p class="subtitle">EC655</p>
  <p class="author">Justin Smith</p>
  <p class="institute">Wilfrid Laurier University</p>
  <p class="date">Fall 2022</p>
</section>

<section>
<section id="introduction" class="title-slide slide level1 center">
<h1>Introduction</h1>

</section>
<section id="introduction-1" class="slide level2">
<h2>Introduction</h2>
<ul>
<li><p>In many empirical applications we want to estimate a causal effect</p>
<ul>
<li><p>The slope in a structural model</p></li>
<li><p>The independent effect of a particular variable on the outcome</p></li>
</ul></li>
<li><p>OLS is inconsistent for this parameter when the error is correlated with <span class="math inline">\(\mathbf{x}\)</span></p>
<ul>
<li><p>This happens often with omitted variables</p></li>
<li><p>There are several other situations</p>
<ul>
<li><p>Simultaneous equations</p></li>
<li><p>Measurement error in <span class="math inline">\(\mathbf{x}\)</span></p></li>
</ul></li>
</ul></li>
<li><p>If we want to consistently estimate causal parameter, we need a different method</p></li>
<li><p>First, some important terminology</p>
<ul>
<li><p>Variables in a regression model that are correlated with the error are <strong>endogenous</strong></p></li>
<li><p>Those that are uncorrelated with the error are <strong>exogenous</strong></p></li>
</ul></li>
</ul>
</section>
<section id="introduction-2" class="slide level2">
<h2>Introduction</h2>
<ul>
<li><p>We will learn several methods to uncover a causal effect with endogenous variables</p>
<ul>
<li><p>Instrumental Variables</p></li>
<li><p>Difference in Differences</p></li>
<li><p>Regression Discontinuity</p></li>
</ul></li>
<li><p>Each takes a different approach to the problem</p></li>
<li><p>One commonality is that many are usually based on <strong>natural experiments</strong></p>
<ul>
<li><p>Individuals are exposed to experimental conditional by outside factors</p></li>
<li><p>Some examples</p>
<ul>
<li><p>Vietnam draft lottery and effect of military service on wages</p></li>
<li><p>2008 Beijing air pollution reduction and birthweight</p></li>
<li><p>Maimonides’ rule and effect of class size on achievement</p></li>
</ul></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="instrumental-variables" class="title-slide slide level1 center">
<h1>Instrumental Variables</h1>

</section>
<section id="model" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>Start with the population regression function</p>
<p><span class="math display">\[y =  \mathbf{x}\boldsymbol{\beta}  + u\]</span></p>
<p><span class="math display">\[=  \mathbf{x_{1}}\boldsymbol{\beta_{1}}  + x_{k}\beta_{k}  + u\]</span></p></li>
<li><p>Suppose that all <span class="math inline">\(\mathbf{x_{1}}\)</span> are uncorrelated with <span class="math inline">\(u\)</span></p>
<ul>
<li>They are <strong>exogenous</strong></li>
</ul></li>
<li><p>But we are worried that <span class="math inline">\(x_{k}\)</span> is correlated with <span class="math inline">\(u\)</span></p>
<ul>
<li>It is <strong>endogenous</strong></li>
</ul></li>
<li><p>We saw that OLS leads to inconsistent estimates of <span class="math inline">\(\boldsymbol{\beta}\)</span></p></li>
</ul>
</section>
<section id="model-1" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>Now imagine we have variable <span class="math inline">\(z_{1}\)</span> that is</p>
<ul>
<li><p>Uncorrelated with <span class="math inline">\(u\)</span></p></li>
<li><p>Correlated with <span class="math inline">\(x_{k}\)</span></p></li>
</ul></li>
<li><p>Define the vector <span class="math inline">\(\mathbf{z}\)</span> to be</p>
<p><span class="math display">\[\mathbf{z} = [1,x_{1}, x_{2}, ...,x_{k-1},z_{1}]\]</span></p>
<ul>
<li><p>It is the <span class="math inline">\(\mathbf{x}\)</span> vector with <span class="math inline">\(z_{1}\)</span> in place of <span class="math inline">\(x_{k}\)</span></p></li>
<li><p>This is the vector of all exogenous factors</p>
<ul>
<li><p><span class="math inline">\(\mathbf{x_{1}}\)</span> are <strong>included instruments</strong></p></li>
<li><p><span class="math inline">\(z_{1}\)</span> is the <strong>excluded instrument</strong> because it comes from outside the model</p></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="model-2" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>Since we assume all factors in <span class="math inline">\(\mathbf{z}\)</span> are exogenous, we can write</p>
<p><span class="math display">\[\mathbf{E}(\mathbf{z}'u) = 0\]</span></p></li>
<li><p>If we take our model</p>
<p><span class="math display">\[y =  \mathbf{x}\boldsymbol{\beta}  + u\]</span></p></li>
<li><p>Pre-multiply by <span class="math inline">\(\mathbf{z}\)</span> and take expectations</p>
<p><span class="math display">\[\mathbf{E}(\mathbf{z}'y) = \mathbf{E}(\mathbf{z'x}) \boldsymbol{\beta}  + \mathbf{E}(\mathbf{z}'u)\]</span></p></li>
<li><p>Using the fact that <span class="math inline">\(\mathbf{E}(\mathbf{z}'u) = 0\)</span></p>
<p><span class="math display">\[\boldsymbol{\beta}  = [\mathbf{E}(\mathbf{z'x})] ^{-1}\mathbf{E}(\mathbf{z}'y)\]</span></p></li>
</ul>
</section>
<section id="model-3" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>To be able to identify <span class="math inline">\(\boldsymbol{\beta}\)</span> as we did above, we need to assume</p>
<ul>
<li><p><span class="math inline">\(\text{rank }\mathbf{z'z} = K+1\)</span></p>
<ul>
<li><p>The variables in <span class="math inline">\(\mathbf{z}\)</span> are linearly independent</p></li>
<li><p>If this is not true we have perfect multicollinearity, and cannot compute <span class="math inline">\(\boldsymbol{\beta}\)</span></p></li>
</ul></li>
<li><p><span class="math inline">\(\text{rank }\mathbf{z'x} = K+1\)</span></p>
<ul>
<li><p>The instrument is correlated with the endogenous variable</p></li>
<li><p>This allows us to invert <span class="math inline">\(\mathbf{E}(\mathbf{z'x})\)</span></p></li>
</ul></li>
</ul></li>
<li><p>Combined with the orthogonality condition this means an instrument must be</p>
<ul>
<li><p>Uncorrelated with the error term</p></li>
<li><p>Correlated with the endogenous variable</p></li>
</ul></li>
<li><p>If either assumption fails, we cannot use IV</p></li>
</ul>
</section>
<section id="estimation-by-method-of-moments" class="slide level2">
<h2>Estimation by Method of Moments</h2>
<ul>
<li><p>Applying the method of moments to the population slope</p>
<p><span class="math display">\[\boldsymbol{\hat{\beta}}=\left ( \frac{1}{n}\sum_{i=1}^{n}\mathbf{z_{i}'x_{i}} \right )^{-1} \left ( \frac{1}{n} \sum_{i=1}^{n}\mathbf{z}_{i}'y_{i}\right ) = \left ( \sum_{i=1}^{n}\mathbf{z_{i}'x_{i}} \right )^{-1} \left ( \sum_{i=1}^{n}\mathbf{z}_{i}'y_{i}\right )\]</span></p>
<p><span class="math display">\[=\left ( \mathbf{Z'X} \right )^{-1} \left ( \mathbf{Z'y}\right )\]</span></p></li>
<li><p>The IV estimator is very similar to the OLS estimator, except</p>
<ul>
<li>The <span class="math inline">\(\mathbf{X'}\)</span> matrix that premultiplies the <span class="math inline">\(\mathbf{X}\)</span> matrix and <span class="math inline">\(\mathbf{y}\)</span> vector is replaced with <span class="math inline">\(\mathbf{Z'}\)</span></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="two-stage-least-squares" class="title-slide slide level1 center">
<h1>Two-Stage Least Squares</h1>

</section>
<section id="model-4" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>In some cases we have more than one instrument for an endogenous variable</p></li>
<li><p>Two-Stage Least Squares (TSLS) generalizes the IV model for this situation</p>
<ul>
<li>Note: In practice, both models are often called Instrumental Variables</li>
</ul></li>
<li><p>The TSLS procedure is</p>
<ul>
<li><p><strong>First Stage</strong>: regress endogenous variable on all exogenous variables</p></li>
<li><p><strong>Second Stage</strong>: regress dependent variable on exogenous <span class="math inline">\(\mathbf{x}\)</span> variables and predicted value of endogenous variable from first stage</p></li>
</ul></li>
<li><p>This process keeps only exogenous part of endogenous variable in the second stage</p>
<ul>
<li>Purges the endogenous variable of the endogenous component</li>
</ul></li>
</ul>
</section>
<section id="model-5" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>To see this mathematically, imagine as before that</p>
<p><span class="math display">\[y =  \mathbf{x_{1}}\boldsymbol{\beta_{1}}  + x_{k}\beta_{k}  + u\]</span></p>
<ul>
<li><p><span class="math inline">\(x_{k}\)</span> is endogenous, and <span class="math inline">\(\mathbf{x_{1}}\)</span> are exogenous</p></li>
<li><p>This is a <strong>structural equation</strong> for <span class="math inline">\(y\)</span>, because it measures causal effects</p></li>
</ul></li>
<li><p>The vector <span class="math inline">\(\mathbf{z}\)</span> is now</p>
<p><span class="math display">\[\mathbf{z} = [1,x_{1}, x_{2}, ...,x_{k-1},z_{1}, z_{2},...,z_{m}]\]</span></p>
<ul>
<li><p>Contains <span class="math inline">\(K\)</span> exogenous <span class="math inline">\(\mathbf{x}\)</span> variables and <span class="math inline">\(M\)</span> instruments</p></li>
<li><p>Total dimension of this vector is <span class="math inline">\(L=K+M\)</span></p></li>
</ul></li>
<li><p>There are at least as many instruments as endogenous variables</p>
<ul>
<li>In this example, there is 1 endogenous variable, so <span class="math inline">\(M \ge 1\)</span></li>
</ul></li>
</ul>
</section>
<section id="model-6" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>When <span class="math inline">\(\mathbf{z}\)</span> is exogenous, <span class="math inline">\(\mathbf{E}(\mathbf{z}'u) = 0\)</span></p></li>
<li><p>If <span class="math inline">\(\mathbf{z}\)</span> is uncorrelated with <span class="math inline">\(u\)</span>, then so is any linear combination of <span class="math inline">\(\mathbf{z}\)</span></p></li>
<li><p>The <strong>reduced form</strong> linear relationship between <span class="math inline">\(\mathbf{x}\)</span> and <span class="math inline">\(\mathbf{z}\)</span> is</p>
<p><span class="math display">\[\mathbf{x} =  \mathbf{z}\boldsymbol{\Pi}   + r\]</span></p>
<ul>
<li><p>This is a regression of each element of <span class="math inline">\(\mathbf{x}\)</span> on <span class="math inline">\(\mathbf{z}\)</span></p></li>
<li><p><span class="math inline">\(\boldsymbol{\Pi}\)</span> is a <span class="math inline">\(L\times K+1\)</span> matrix</p>
<ul>
<li><p>Each column is the coefficients from regressing an element of <span class="math inline">\(\mathbf{x}\)</span> on <span class="math inline">\(\mathbf{z}\)</span></p></li>
<li><p>Like doing a separate regression of each element in <span class="math inline">\(\mathbf{x}\)</span> on <span class="math inline">\(\mathbf{z}\)</span> and collecting all coefficient vectors into a big matrix</p></li>
</ul></li>
<li><p>Reduced form means all the regressors are exogenous, but it does not necessarily measure causal effects</p></li>
</ul></li>
</ul>
</section>
<section id="model-7" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>The population regression function in this relationship is</p>
<p><span class="math display">\[\mathbf{x}^{*} =  \mathbf{z}\boldsymbol{\Pi}\]</span></p>
<ul>
<li>This is the <strong>first stage</strong> regression</li>
</ul></li>
<li><p>When you regress a variable on itself, the predicted value is itself</p>
<ul>
<li>Even if there are other variables in the model</li>
</ul></li>
<li><p>So the vector <span class="math inline">\(\mathbf{x}^{*}\)</span> is</p>
<p><span class="math display">\[\mathbf{x}^{*} = [1,x_{1}, x_{2}, ...,x_{k-1},x_{k}^{*}]\]</span></p></li>
<li><p>where <span class="math inline">\(x_{k}^{*} = \pi_{0} + \pi_{1}x_{1} + \pi_{2}x_{2} + ...+\pi_{k-1}x_{k-1} + \pi_{k+1}z_{1} + ... +\pi_{k+m}z_{m}\)</span></p></li>
<li><p>For the first stage, we only need to regress the endogenous variables on <span class="math inline">\(\mathbf{z}\)</span></p></li>
</ul>
</section>
<section id="model-8" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>As noted, a linear combination of <span class="math inline">\(\mathbf{z}\)</span> is uncorrelated with <span class="math inline">\(u\)</span>, so</p>
<p><span class="math display">\[\mathbf{E}(\mathbf{x}^{*'}u) = 0\]</span></p></li>
<li><p>Premultiplying our structural equation by <span class="math inline">\(\mathbf{x}^{*'}\)</span> and taking expectations</p>
<p><span class="math display">\[\mathbf{E}(\mathbf{x}^{*'}y) = \mathbf{E}(\mathbf{x^{*'}x}) \boldsymbol{\beta}  + \mathbf{E}(\mathbf{x}^{*'}u)\]</span></p></li>
<li><p>Using <span class="math inline">\(\mathbf{E}(\mathbf{x}^{*'}u) = 0\)</span></p>
<p><span class="math display">\[\boldsymbol{\beta}  = \left(\mathbf{E}(\mathbf{x^{*'}x})\right)^{-1}\mathbf{E}(\mathbf{x}^{*'}y)\]</span></p></li>
<li><p>This is the population TSLS slope</p>
<ul>
<li>We will cover estimation shortly</li>
</ul></li>
</ul>
</section>
<section id="model-9" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>You can also write this estimator as</p>
<p><span class="math display">\[\boldsymbol{\beta}  = \left(\mathbf{E}(\mathbf{x^{*'}x^{*}})\right)^{-1}\mathbf{E}(\mathbf{x}^{*'}y)\]</span></p>
<ul>
<li><p>This is the slope from a regression of <span class="math inline">\(y\)</span> on <span class="math inline">\(\mathbf{x^{*}}\)</span></p></li>
<li><p>It is the slope from the <strong>second stage</strong></p></li>
</ul></li>
<li><p>To see how, recall that <span class="math display">\[\mathbf{x}=   \mathbf{z}\boldsymbol{\Pi} + r= \mathbf{x}^{*} + r\]</span></p></li>
<li><p>Pre-multiply by <span class="math inline">\(\mathbf{x}^{*'}\)</span> and take expectations <span class="math display">\[\mathbf{E}(\mathbf{x}^{*'} \mathbf{x})= \mathbf{E}(\mathbf{x}^{*'} \mathbf{x}^{*}) + \mathbf{E}(\mathbf{x}^{*'} r)\]</span></p></li>
<li><p>Since by definition <span class="math inline">\(\mathbf{E}(\mathbf{x}^{*'} r) = 0\)</span> <span class="math display">\[\mathbf{E}(\mathbf{x}^{*'} \mathbf{x})= \mathbf{E}(\mathbf{x}^{*'} \mathbf{x}^{*})\]</span></p></li>
</ul>
</section>
<section id="model-10" class="slide level2">
<h2>Model</h2>
<ul>
<li><p>Finally, note that the IV estimator is a special case of 2SLS</p></li>
<li><p>Assume we have one endogenous variable and one excluded instrument</p>
<ul>
<li><p>This means that <span class="math inline">\(\mathbf{x}\)</span> and <span class="math inline">\(\mathbf{z}\)</span> are both <span class="math inline">\(K+1\)</span> matrices</p></li>
<li><p>The matrix <span class="math inline">\(\mathbf{\Pi}\)</span> is <span class="math inline">\(K+1 \times K+1\)</span></p></li>
</ul></li>
<li><p>Substitute the definition of <span class="math inline">\(\mathbf{x}^{*'}\)</span> into the formula for <span class="math inline">\(\boldsymbol{\beta}\)</span> <span class="math display">\[\boldsymbol{\beta}  = \left(\mathbf{E}(\mathbf{(z\Pi)'x})\right)^{-1}\mathbf{E}((\mathbf{z\Pi)'}y)\]</span></p></li>
<li><p>Distributing the transpose and pulling <span class="math inline">\(\mathbf{\Pi}\)</span> out of the expectation <span class="math display">\[\boldsymbol{\beta}  = \left(\mathbf{\Pi'}\mathbf{E}\mathbf{(z'x})\right)^{-1}\mathbf{\Pi'}\mathbf{E}(\mathbf{z'}y) =  \left(\mathbf{E}\mathbf{(z'x})\right)^{-1}(\mathbf{\Pi'})^{-1}\mathbf{\Pi'}\mathbf{E}(\mathbf{z'}y)\]</span> <span class="math display">\[\boldsymbol{\beta}  =\left(\mathbf{E}(\mathbf{z}'\mathbf{x})\right)^{-1} \mathbf{E}(\mathbf{z}'y)\]</span></p></li>
</ul>
</section>
<section id="estimation-by-method-of-moments-1" class="slide level2">
<h2>Estimation by Method of Moments</h2>
<ul>
<li><p>As before, substitute sample versions of population moments to get</p></li>
<li><p>Also recall that this is a two-step process</p></li>
<li><p>The <strong>first stage</strong>, is the regression of <span class="math inline">\(\mathbf{x}\)</span> on <span class="math inline">\(\mathbf{z}\)</span></p>
<ul>
<li><p>The population regression function is</p>
<p><span class="math display">\[\mathbf{x}^{*} =  \mathbf{z}\boldsymbol{\Pi}\]</span> <span class="math display">\[\boldsymbol{\Pi} = \left(\mathbf{E}(\mathbf{z'z})\right)^{-1}\mathbf{E}(\mathbf{z'x})\]</span></p></li>
<li><p>The sample version is <span class="math display">\[\mathbf{\hat{X}} =  \mathbf{Z}\boldsymbol{\hat{\Pi}}\]</span> <span class="math display">\[\boldsymbol{\hat{\Pi}} = \left( \mathbf{Z'Z} \right)^{-1}\mathbf{Z'X}\]</span></p></li>
</ul></li>
</ul>
</section>
<section id="estimation-by-method-of-moments-2" class="slide level2">
<h2>Estimation by Method of Moments</h2>
<ul>
<li><p>When there is one endogenous variable, the matrix <span class="math inline">\(\mathbf{\hat{X}}\)</span> is</p>
<p><span class="math display">\[\mathbf{\hat{X}} =
\begin{bmatrix}
1 &amp; x_{11}  &amp; x_{12} &amp;\cdots&amp;x_{1,k-1} &amp; \hat{x}_{1k}\\
1 &amp; x_{21}  &amp; x_{22} &amp;\cdots&amp;x_{2,k-1} &amp; \hat{x}_{2k}\\
\vdots  &amp; \vdots &amp; \ddots &amp;\vdots &amp;\vdots \\
1 &amp; x_{n1}  &amp; x_{n2} &amp;\cdots&amp;x_{n,k-1} &amp; \hat{x}_{nk}
\end{bmatrix}
=
\begin{bmatrix}
\mathbf{X_{1}} &amp; \mathbf{\hat{x}_{k}}
\end{bmatrix}\]</span></p>
<ul>
<li><p>For the first stage we only regress <span class="math inline">\(\mathbf{\hat{x}_{k}}\)</span> on <span class="math inline">\(\mathbf{Z}\)</span></p></li>
<li><p>We do not do first stage regressions in practice for the included instruments</p>
<ul>
<li>Because their predicted values and actual values are the same</li>
</ul></li>
</ul></li>
<li><p>The <strong>second stage</strong> is the regression of <span class="math inline">\(\mathbf{y}\)</span> on <span class="math inline">\(\mathbf{\hat{x}}\)</span></p>
<ul>
<li><p>The population slope we derived is</p>
<p><span class="math display">\[\boldsymbol{\beta}  = \left(\mathbf{E}(\mathbf{x^{*'}x^{*'}})\right)^{-1}\mathbf{E}(\mathbf{x}^{*'}y)\]</span></p></li>
</ul></li>
</ul>
</section>
<section id="estimation-by-method-of-moments-3" class="slide level2">
<h2>Estimation by Method of Moments</h2>
<ul>
<li><p>second stage continued...</p>
<ul>
<li><p>The sample version is</p>
<p><span class="math display">\[\boldsymbol{\hat{\beta}}  = \left(\mathbf{\hat{X}'\hat{X}}\right)^{-1}\mathbf{\hat{X}'y}\]</span></p></li>
</ul></li>
<li><p>The TSLS estimator is simply an OLS estimator in two stages</p></li>
</ul>
</section>
<section id="intuition" class="slide level2">
<h2>Intuition</h2>
<ul>
<li><p>The starting point for TSLS is an endogenous variable</p>
<ul>
<li><p>A variable that is correlated with <span class="math inline">\(u\)</span></p></li>
<li><p>Usually because of omitted variables bias</p></li>
</ul></li>
<li><p>OLS will not consistently identify the slope vector <span class="math inline">\(\boldsymbol{\beta}\)</span></p></li>
<li><p>We have access to at least one variable from outside the model that is</p>
<ul>
<li><p>Uncorrelated with the error term <span class="math inline">\(u\)</span></p></li>
<li><p>Correlated with the endogenous variable <span class="math inline">\(x_{k}\)</span></p></li>
</ul></li>
</ul>
</section>
<section id="intuition-1" class="slide level2">
<h2>Intuition</h2>
<ul>
<li><p>In the first stage, we regress <span class="math inline">\(x_{k}\)</span> on all exogenous variables</p>
<ul>
<li><p>Separates <span class="math inline">\(x_{k}\)</span> into two pieces</p>
<ul>
<li><p>The exogenous part: the piece that is correlated with the exogenous variables</p></li>
<li><p>The endogenous part: the residual from this regression, which is uncorrelated with the exogenous piece</p></li>
</ul></li>
<li><p>The first stage purges the endogenous component from <span class="math inline">\(x_{k}\)</span></p></li>
<li><p>Keeps only the exogenous component, <span class="math inline">\(\hat{x}_{k}\)</span></p></li>
</ul></li>
<li><p>We use the only the exogenous piece <span class="math inline">\(\hat{x}_{k}\)</span> in the second stage regression</p></li>
</ul>
</section></section>
<section>
<section id="statistical-properties-of-tsls" class="title-slide slide level1 center">
<h1>Statistical Properties of TSLS</h1>

</section>
<section id="introduction-3" class="slide level2">
<h2>Introduction</h2>
<ul>
<li><p>Like we did with the OLS estimator, we cover the statistical properties of TSLS</p>
<ul>
<li>We will be slightly less detailed</li>
</ul></li>
<li><p>We first need to outline the set of assumptions required for consistency</p></li>
</ul>
</section>
<section id="assumptions" class="slide level2">
<h2>Assumptions</h2>
<ol type="1">
<li><p><span class="math inline">\(\mathbf{E}(\mathbf{z}'u) = 0\)</span></p>
<ul>
<li><p>The vector of exogenous variables is uncorrelated with <span class="math inline">\(u\)</span></p></li>
<li><p>This is sometimes called the <strong>exclusion restriction</strong></p>
<ul>
<li>The instruments come from outside the model and are uncorrelated with the error</li>
</ul></li>
</ul></li>
</ol>
</section>
<section id="assumptions-1" class="slide level2">
<h2>Assumptions</h2>
<ol start="2" type="1">
<li><p><span class="math inline">\(\text{rank } \mathbf{E}(\mathbf{z'z}) = L\)</span> and <span class="math inline">\(\text{rank } \mathbf{E}(\mathbf{z'x}) = K\)</span></p>
<ul>
<li><p>First part says that none of the variables in <span class="math inline">\(\mathbf{z}\)</span> are perfectly collinear</p></li>
<li><p>Second part is the <strong>rank condition</strong></p>
<ul>
<li><p>The instruments must be sufficiently correlated with the endogenous variable</p></li>
<li><p>We will come back to this when we talk about weak instruments</p></li>
</ul></li>
<li><p>For this assumption to hold we also need to meet the <strong>order condition</strong></p>
<ul>
<li><p>There are at least as many instruments as endogenous variables</p></li>
<li><p>Mathematically, we need <span class="math inline">\(L\ge K+1\)</span></p></li>
</ul></li>
</ul></li>
<li><p><span class="math inline">\(\{(\mathbf{x}_{i},\mathbf{z_{i}}, y_{i}: i=1,2,...n)\}\)</span> are a random sample</p></li>
</ol>
</section>
<section id="consistency" class="slide level2">
<h2>Consistency</h2>
<ul>
<li><p>If all of the assumptions are met, the TSLS estimator is consistent for <span class="math inline">\(\boldsymbol{\beta}\)</span></p></li>
<li><p>We will not do the proof, but it is very similar to OLS</p></li>
<li><p>If any of the assumptions fail, the TSLS estimator is inconsistent</p></li>
</ul>
</section>
<section id="unbiasedness" class="slide level2">
<h2>Unbiasedness</h2>
<ul>
<li><p>In small samples, the TSLS estimator is generally <strong>biased</strong></p></li>
<li><p>We will not cover the proof</p></li>
<li><p>You should only use TSLS with large samples</p></li>
</ul>
</section>
<section id="large-sample-distribution-of-boldsymbolhatbeta" class="slide level2">
<h2>Large Sample Distribution of <span class="math inline">\(\boldsymbol{\hat{\beta}}\)</span></h2>
<ul>
<li><p>We again appeal to the Central Limit Theorem</p></li>
<li><p>With large <span class="math inline">\(n\)</span>, the TSLS estimator has a Normal distribution with mean <span class="math inline">\(\boldsymbol{\beta}\)</span> and variance</p>
<p><span class="math display">\[\text{var}(\boldsymbol{\hat{\beta}}) = n^{-1}[\mathbf{E}(\mathbf{x^{*'}x^{*}})^{-1}]\mathbf{E}(u^2\mathbf{x^{*'}x^{*}})[\mathbf{E}(\mathbf{x^{*'}x^{*}})^{-1}]\]</span></p></li>
<li><p>If we assume homoskedasticity <span class="math inline">\(\mathbf{E}(u^2|\mathbf{z}) = \sigma^2\)</span> this reduces to</p>
<p><span class="math display">\[\text{var}(\boldsymbol{\hat{\beta}}) = \sigma^2 n^{-1}\mathbf{E}(\mathbf{x^{*'}x^{*}})^{-1}\]</span></p></li>
</ul>
</section>
<section id="variance-estimator-for-boldsymbolhatbeta" class="slide level2">
<h2>Variance Estimator for <span class="math inline">\(\boldsymbol{\hat{\beta}}\)</span></h2>
<ul>
<li><p>To estimate the variance, substitute sample versions of the population moments</p></li>
<li><p>The <strong>Heteroskedasticity-Robust</strong> variance estimator is</p>
<p><span class="math display">\[\hat{\text{var}}(\boldsymbol{\hat{\beta}}) = \left (\mathbf{\hat{X}'\hat{X}}\right )^{-1}\left ( \sum_{i=1}^{n}\hat{u}_{i}^2\mathbf{\hat{x}_{i}'\hat{x}_{i}}\right )\left ( \mathbf{\hat{X}'\hat{X}}\right )^{-1}\]</span></p></li>
<li><p>If we assume <strong>homoskedasticity</strong>, it is</p>
<p><span class="math display">\[\hat{\text{var}}(\boldsymbol{\hat{\beta}}) = s_{\hat{u}}^2 \left (\mathbf{\hat{X}'\hat{X}}\right )^{-1}\]</span></p></li>
<li><p>In both cases, we use the <strong>TSLS residuals</strong>, which are</p>
<p><span class="math display">\[\mathbf{\hat{u}} = \mathbf{y} - \mathbf{X}\boldsymbol{\hat{\beta}}\]</span></p></li>
</ul>
</section>
<section id="variance-estimator-for-boldsymbolhatbeta-1" class="slide level2">
<h2>Variance Estimator for <span class="math inline">\(\boldsymbol{\hat{\beta}}\)</span></h2>
<ul>
<li><p>These are <u>not</u> the residuals from the second stage regression <span class="math inline">\(\mathbf{y} - \mathbf{\hat{X}}\boldsymbol{\hat{\beta}}\)</span></p>
<ul>
<li><p>Use <span class="math inline">\(\mathbf{X}\)</span> – not <span class="math inline">\(\mathbf{\hat{X}}\)</span> – in this calculation</p></li>
<li><p>This is a common mistake</p></li>
<li><p>Using the wrong residuals will lead to incorrect estimates of the standard errors</p></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="structural-and-reduced-form-in-tsls" class="title-slide slide level1 center">
<h1>Structural and Reduced Form in TSLS</h1>

</section>
<section id="structural-vs-reduced-form-equations" class="slide level2">
<h2>Structural vs Reduced form Equations</h2>
<ul>
<li><p>In this section we present details that are useful for using TSLS in practice</p></li>
<li><p>This will help you understand when you read papers using TSLS</p></li>
<li><p>Suppose we have a model with one endogenous variable and one instrument</p></li>
<li><p>The instrumental variables model in scalar notation is</p>
<p><span class="math display">\[y =  \beta_{0} + x_{1}\beta_{1} +...+ x_{k-1}\beta_{k-1} + x_{k}\beta_{k}  + u\]</span> <span class="math display">\[x_{k} =  \pi_{0} + x_{1}\pi_{1}+...+x_{k-1}\pi_{k-1}  +z_{1}\delta_{1}  + r\]</span></p></li>
<li><p>The first equation is the <strong>structural equation</strong></p>
<ul>
<li>The equation containing the causal effects we are interested in</li>
</ul></li>
</ul>
</section>
<section id="structural-vs-reduced-form-equations-1" class="slide level2">
<h2>Structural vs Reduced form Equations</h2>
<ul>
<li><p>The second equation is the first stage</p>
<ul>
<li><p>It is a <strong>reduced form</strong> equation</p>
<ul>
<li><p>All of the regressors are exogenous</p></li>
<li><p>The parameters do not necessarily represent causal effects</p></li>
</ul></li>
</ul></li>
<li><p>Researchers often also estimate the reduced form for <span class="math inline">\(y\)</span></p>
<ul>
<li><p>Sub the second equation into the first to get <span class="math display">\[y =  (\beta_{0} + \beta_{k}\pi_{0}) + x_{1}(\beta_{1} + \beta_{k}\pi_{1}) +...+ x_{k-1} (\beta_{k-1}+ \beta_{k}\pi_{k-1}) + z_{1}\beta_{k}\delta_{1}  + u + \beta_{k}r\]</span> <span class="math display">\[= \gamma_{0}+ x_{1}\gamma_{1}+...+ x_{k-1} \gamma_{k-1}+ z_{1}\theta_{1}+ \epsilon\]</span></p></li>
<li><p>This is the regression of <span class="math inline">\(y\)</span> on all the exogenous variables</p></li>
</ul></li>
</ul>
</section>
<section id="structural-vs-reduced-form-equations-2" class="slide level2">
<h2>Structural vs Reduced form Equations</h2>
<ul>
<li><p>In the reduced form for <span class="math inline">\(y\)</span>, the slope <span class="math inline">\(\theta_{1} = \beta_{k}\delta_{1}\)</span></p>
<ul>
<li>The effect of <span class="math inline">\(z_{1}\)</span> on <span class="math inline">\(x_{k}\)</span> times the effect of <span class="math inline">\(x_{k}\)</span> on <span class="math inline">\(y\)</span></li>
</ul></li>
<li><p>You can get the slope <span class="math inline">\(\beta_{k}\)</span> by dividing the reduced form by the first stage</p>
<p><span class="math display">\[\beta_{k}  = \frac{\theta_{1}}{\delta_{1}}\]</span></p></li>
<li><p><span class="math inline">\(\beta_{k}\)</span> is the reduced form effect scaled by the first stage</p>
<ul>
<li><p>Ex: returns to schooling</p></li>
<li><p>Imagine <span class="math inline">\(y\)</span> is income, <span class="math inline">\(x_{k}\)</span> is years of schooling, <span class="math inline">\(z_{1}\)</span> is kms to nearest university</p></li>
<li><p>If <span class="math inline">\(\delta_{1} = .5\)</span>, being 1km closer to school leads to .5 more years of schooling</p></li>
<li><p>If <span class="math inline">\(\theta_{1} = 10000\)</span>, being 1km closer to school leads to $10000 more income</p></li>
<li><p>Then <span class="math inline">\(\beta_{k} = \frac{10000}{.5} = 20000\)</span> is effect of a year of additional schooling</p></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="checking-instrument-validity" class="title-slide slide level1 center">
<h1>Checking Instrument Validity</h1>

</section>
<section id="introduction-4" class="slide level2">
<h2>Introduction</h2>
<ul>
<li><p>There are two main assumptions for instrumental variables</p>
<ul>
<li><p><strong>Exclusion restriction</strong>: instruments come from outside the model and are uncorrelated with <span class="math inline">\(u\)</span></p></li>
<li><p><strong>Rank condition</strong>: excluded instruments are sufficiently related to the endogenous variable</p>
<ul>
<li>This is sometimes also called the instrument relevance condition</li>
</ul></li>
</ul></li>
<li><p>Failure of either of these creates problems</p></li>
<li><p>To understand these issues, it is useful to study the following model</p>
<p><span class="math display">\[y = \beta_{0} + \beta_{1}x_{1} + u\]</span> <span class="math display">\[x_{1} = \pi_{0} + \pi_{1}z_{1} + r\]</span></p></li>
</ul>
</section>
<section id="introduction-5" class="slide level2">
<h2>Introduction</h2>
<ul>
<li><p>In this model, you can show that</p>
<p><span class="math display">\[\text{plim }\hat{\beta}_{1} = \beta_{1} + \frac{cov(z_{1},u)}{cov(z_{1},x_{1})}\]</span> <span class="math display">\[= \beta_{1} + \frac{\sigma_{u}}{\sigma_{x_{1}}}\frac{corr(z_{1},u)}{corr(z_{1},x_{1})}\]</span></p></li>
<li><p>We will use this result to inform ourselves about the failure of our assumptions</p></li>
<li><p>The key idea is that instruments must be relevant and exogenous</p></li>
</ul>
</section>
<section id="exclusion-restriction" class="slide level2">
<h2>Exclusion Restriction</h2>
<ul>
<li><p>Consider the plim of the TSLS slope estimator</p>
<p><span class="math display">\[\text{plim }\hat{\beta}_{1} = \beta_{1} + \frac{cov(z_{1},u)}{cov(z_{1},x_{1})}\]</span></p></li>
<li><p>If the exclusion restriction holds, then <span class="math inline">\(cov(z_{1},u) = 0\)</span> and <span class="math inline">\(\text{plim }\hat{\beta}_{1} = \beta_{1}\)</span></p></li>
<li><p>If not then <span class="math inline">\(\text{plim }\hat{\beta}_{1} \neq \beta_{1}\)</span> and the TSLS estimator is inconsistent</p></li>
<li><p>Can we check to see if this assumption is true?</p></li>
<li><p>If we have one excluded instrument for each endogenous variable, we cannot</p>
<ul>
<li><p>This model is <strong>exactly identified</strong></p></li>
<li><p>There are no enough degrees of freedom to test the exclusion restriction</p></li>
<li><p>We have to rely only on our assumptions in this case</p></li>
</ul></li>
</ul>
</section>
<section id="exclusion-restriction-1" class="slide level2">
<h2>Exclusion Restriction</h2>
<ul>
<li><p>In a model with multiple excluded instruments for the endogenous variable, we can</p>
<ul>
<li><p>The model is <strong>overidentified</strong></p></li>
<li><p>We use the extra instruments to test whether the others are endogenous</p></li>
</ul></li>
<li><p>A useful test when errors are homoskedastic is the <strong>Sargan Test</strong></p>
<ul>
<li><p>Estimate the model using TSLS</p></li>
<li><p>Compute the TSLS residuals, <span class="math inline">\(\mathbf{\hat{u}}\)</span></p></li>
<li><p>Regress <span class="math inline">\(\mathbf{\hat{u}}\)</span> on all instruments <span class="math inline">\(\mathbf{z}\)</span></p>
<ul>
<li><p>The model is <strong>overidentified</strong></p></li>
<li><p>Save <span class="math inline">\(R^2_u\)</span> from this regression</p></li>
</ul></li>
<li><p>The test statistic is <span class="math inline">\(nR^2_u\)</span></p>
<ul>
<li>Has a <span class="math inline">\(\chi^2_{Q_{1}}\)</span> distribution, where <span class="math inline">\(Q_{1}\)</span> are overidentifying restrictions</li>
</ul></li>
<li><p>The null hypothesis is exogeneity</p></li>
</ul></li>
</ul>
</section>
<section id="exclusion-restriction-2" class="slide level2">
<h2>Exclusion Restriction</h2>
<ul>
<li><p>There is a more complicated test with heteroskedastic errors</p>
<ul>
<li><p>You can easily execute this in Stata</p></li>
<li><p>We can discuss the process separately</p></li>
</ul></li>
<li><p>If you fail this test (reject the null), then you need to find other instruments</p></li>
</ul>
</section>
<section id="instrument-relevance" class="slide level2">
<h2>Instrument Relevance</h2>
<ul>
<li><p>For TSLS to work, the instrument must be relevant</p>
<ul>
<li>It must be sufficiently correlated with the endogenous variable</li>
</ul></li>
<li><p>An instrument that is not sufficiently relevant is a <strong>weak instrument</strong></p></li>
<li><p>Weak instruments can cause several problems</p></li>
</ul>
<ol type="1">
<li><p>Inconsistency when the instrument and error are not exactly uncorrelated</p>
<ul>
<li><p>Consider the plim of the TSLS slope estimator</p>
<p><span class="math display">\[\text{plim }\hat{\beta}_{1} =  \beta_{1} + \frac{\sigma_{u}}{\sigma_{x_{1}}}\frac{corr(z_{1},u)}{corr(z_{1},x_{1})}\]</span></p></li>
</ul></li>
</ol>
</section>
<section id="instrument-relevance-1" class="slide level2">
<h2>Instrument Relevance</h2>
<ul>
<li><p>Continued...</p>
<ul>
<li><p>When <span class="math inline">\(corr(z_{1},x_{1}) \rightarrow 0\)</span> then <span class="math inline">\(\frac{corr(z_{1},u)}{corr(z_{1},x_{1})} \rightarrow \infty\)</span></p>
<ul>
<li>True even when <span class="math inline">\(corr(z_{1},u)\)</span> is very close to zero</li>
</ul></li>
<li><p>In practice, we can never be sure <span class="math inline">\(corr(z_{1},u)\)</span> is <em>exactly</em> zero, so this is an issue</p></li>
<li><p>Also note that the plim of the OLS estimator is</p>
<p><span class="math display">\[\text{plim }\hat{\beta}_{1}^{ols} =  \beta_{1} + \frac{\sigma_{u}}{\sigma_{x_{1}}}corr(x_{1},u)\]</span></p></li>
<li><p>Taking the ration of the two biases <span class="math display">\[\frac{\hat{\beta}_{1}-\beta_{1}}{\hat{\beta}_{1}^{ols}-\beta_{1}} =  \frac{corr(z_{1},u)/corr(x_{1},u)}{corr(z_{1},x_{1})}\]</span></p></li>
<li><p>As <span class="math inline">\(corr(z_{1},x_{1}) \rightarrow 0\)</span>, the inconsistency in 2SLS becomes larger than the inconsistency in OLS</p></li>
</ul></li>
</ul>
</section>
<section id="instrument-relevance-2" class="slide level2">
<h2>Instrument Relevance</h2>
<ol start="2" type="1">
<li><p>Finite sample bias in TSLS becomes large</p>
<ul>
<li><p>The expected value of the TSLS estimator can be written as</p>
<p><span class="math display">\[\mathbf{E}(\hat{\beta}_{1} - \beta_{1}) \approx \frac{\sigma_{ur}}{\sigma_{r}^2}\frac{1}{F+1}\]</span></p></li>
<li><p>Where <span class="math inline">\(F\)</span> is the F-statistic from the test of joint significance of the excluded regressors</p></li>
<li><p>Weak instruments means that <span class="math inline">\(F\)</span> is close to zero</p></li>
<li><p>As <span class="math inline">\(F\)</span> gets small, the bias tends to <span class="math inline">\(\frac{\sigma_{ur}}{\sigma_{r}^2}\)</span></p>
<ul>
<li><p>If <span class="math inline">\(F\)</span> is exactly zero, that means the instrument is irrelevant <span class="math inline">\((\pi_{1}=0)\)</span></p></li>
<li><p>In this case <span class="math inline">\(\frac{\sigma_{ur}}{\sigma_{r}^2}\)</span> is also the OLS bias</p></li>
<li><p>So 2SLS and OLS produce the same biased result</p></li>
</ul></li>
<li><p>When instruments are weak, TSLS is biased towards OLS</p></li>
</ul></li>
</ol>
</section>
<section id="instrument-relevance-3" class="slide level2">
<h2>Instrument Relevance</h2>
<ol start="3" type="1">
<li><p>Standard inference is no longer valid</p>
<ul>
<li><p>We rely in the central limit theorem to show TSLS estimator has a Normal distribution</p></li>
<li><p>With weak instruments, this no longer holds</p>
<ul>
<li>The estimator has the distribution of the ratio of two Normal variables</li>
</ul></li>
<li><p>In this case the t-statistic no longer has a t-distribution</p></li>
<li><p>Hypothesis tests tend to reject the null more than it should</p></li>
</ul></li>
</ol>
</section>
<section id="instrument-relevance-4" class="slide level2">
<h2>Instrument Relevance</h2>
<ul>
<li><p>There are several tests available to check for weak instruments</p></li>
<li><p>The null hypotheses of these tests are weak instruments</p></li>
</ul>
<ol type="1">
<li><p>Test with one endogenous regressor</p>
<ul>
<li><p>Based on F-statistic on excluded instruments in first stage</p></li>
<li><p>Critical values for set amount of bias or size distortion</p></li>
<li><p>Ex: when <span class="math inline">\(F=10\)</span> maximum TSLS bias is about 10% of OLS bias</p></li>
<li><p>Also when <span class="math inline">\(F=10\)</span>, the rejection rate of a 5% test is no more than 20%</p></li>
<li><p>As <span class="math inline">\(F\)</span> gets larger, relative bias shrinks and test size distortion falls</p></li>
<li><p><span class="math inline">\(F=10\)</span> is often called “Staiger Stock rule of thumb”, based on authors who developed it</p></li>
<li><p>Generally thought that when <span class="math inline">\(F&gt;10\)</span>, instruments are not weak</p></li>
</ul></li>
</ol>
</section>
<section id="instrument-relevance-5" class="slide level2">
<h2>Instrument Relevance</h2>
<ol start="2" type="1">
<li><p>Test with more than one endogenous regressor</p>
<ul>
<li><p>Suppose you have two endogenous variables and two instruments</p></li>
<li><p>You could compute a first stage <span class="math inline">\(F\)</span> for each endogenous variable</p></li>
<li><p>Problem arises when you have one instrument that is strong in both first stages</p></li>
<li><p>In this case you have one strong and one weak instrument</p></li>
<li><p>The F-statistic is modified in this case for doing this test jointly</p></li>
<li><p>It is sometimes called the Cragg-Donald F-Statistic</p></li>
<li><p>With one endogenous variable, the Cragg-Donald F-stat is the first-stage F-Stat</p></li>
</ul></li>
<li><p>Test that are heteroskedasticity-robust</p>
<ul>
<li><p>Both tests described above assume homoskedastic errors</p></li>
<li><p>Kelibergen-Paap adjusted the test for heteroskedasticity</p></li>
<li><p>Otherwise, works in the same way as described above</p></li>
</ul></li>
</ol>
</section>
<section id="instrument-relevance-6" class="slide level2">
<h2>Instrument Relevance</h2>
<ul>
<li>Finally, what if we fail the weak instrument tests?</li>
</ul>
<ol type="1">
<li><p>Find better instruments or drop weak ones</p>
<ul>
<li><p>If your model is overidentified, you can drop the weak instruments</p></li>
<li><p>If it is exactly identified, you could try to find better instruments</p>
<ul>
<li>This is not easy since instruments generally come from natural experiments</li>
</ul></li>
</ul></li>
<li><p>Use weak instrument robust inference</p>
<ul>
<li><p>As noted, t-tests will reject the null too often with weak instruments</p></li>
<li><p>You can adjust testing to have the correct size</p></li>
<li><p>There are several available</p>
<ul>
<li><p>Anderson Rubin (AR)</p></li>
<li><p>Conditional Likelihood Ration (CLR)</p></li>
<li><p>We will not cover the details of this, but all are available in Stata</p></li>
</ul></li>
</ul></li>
</ol>
</section></section>
<section>
<section id="interpretation-of-slope-in-iv-models" class="title-slide slide level1 center">
<h1>Interpretation of Slope in IV Models</h1>

</section>
<section id="introduction-6" class="slide level2">
<h2>Introduction</h2>
<ul>
<li><p>The Rubin model tells us how to interpret the slope in a regression model</p></li>
<li><p>Specific interpretation depends on assumptions</p>
<ul>
<li><p>If we make strong assumption that treatment is randomly assigned, regression slope is the average treatment effect (ATE)</p></li>
<li><p>Weaker assumption of mean independence or conditional mean independence of <span class="math inline">\(y_{0}\)</span> gives us average treatment effect on the treated (ATT)</p></li>
</ul></li>
<li><p>But in an instrumental variables model, these assumptions are violated</p>
<ul>
<li><p>The error term is correlated with treatment</p></li>
<li><p>So we cannot assume mean independence of the error</p></li>
</ul></li>
<li><p>In this section, we alter the Rubin model to interpret the slope in an IV model</p></li>
</ul>
</section>
<section id="local-average-treatment-effects" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>Start with the observed outcomes from the Rubin model <span class="math display">\[y = y_{0} + (y_{1} -y_{0})w\]</span></p></li>
<li><p>Now suppose we have a binary instrument <span class="math inline">\(z\)</span></p>
<ul>
<li>This variable measures your <em>assignment</em> to treatment</li>
</ul></li>
<li><p>Define observed treatment as <span class="math display">\[w = w_{0} + (w_{1} -w_{0})z\]</span></p>
<ul>
<li><p><span class="math inline">\(w_{1}\)</span> is potential treatment when assigned to treatment</p></li>
<li><p><span class="math inline">\(w_{0}\)</span> is potential treatment when not assigned to treatment</p></li>
<li><p>We observe <span class="math inline">\(w=w_{0}\)</span> when <span class="math inline">\(z=0\)</span> and <span class="math inline">\(w=w_{1}\)</span> when <span class="math inline">\(z=1\)</span></p></li>
</ul>
<p><span class="math display">\[y_{i} = y_{i0} + (y_{i1} -y_{i0})w_{i0} +  (y_{i1} -y_{i0})(w_{i1} -w_{i0})z_{i}\]</span></p></li>
<li><p>Assume that the instrument is independent of treatment and outcomes <span class="math display">\[(y_{i0}, y_{i1}, w_{i0}, w_{i1}) \perp z_{i}\]</span></p></li>
</ul>
</section>
<section id="local-average-treatment-effects-1" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>We saw that the TSLS estimator is the reduced form divided by the first stage</p></li>
<li><p>In this setup with binary <span class="math inline">\(y\)</span>, the reduced form is</p>
<p><span class="math display">\[E(y|z=1) - E(y|z=0)\]</span></p></li>
<li><p>and with binary <span class="math inline">\(w\)</span> the first stage is</p>
<p><span class="math display">\[E(w|z=1) - E(w|z=0)\]</span></p></li>
<li><p>So that the IV estimator is</p>
<p><span class="math display">\[\frac{E(y|z=1) - E(y|z=0)}{E(w|z=1) - E(w|z=0)}\]</span></p></li>
<li><p>We now derive the the numerator and denominator</p></li>
</ul>
</section>
<section id="local-average-treatment-effects-2" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>To get the numerator, first substitute <span class="math inline">\(w\)</span> equation into <span class="math inline">\(y\)</span> equation <span class="math display">\[y = y_{0} + (y_{1} -y_{0})w_{0} +  (y_{1} -y_{0})(w_{1} -w_{0})z\]</span></p></li>
<li><p>Assume the instrument <span class="math inline">\(z\)</span> is independent of potential treatment and outcomes <span class="math display">\[(y_{0}, y_{1}, w_{0}, w_{1}) \perp z\]</span></p></li>
<li><p>This allows us to write the following conditional expectations <span class="math display">\[E(y|z=1) = E(y_{0}) + E((y_{1} -y_{0})w_{0}) +  E((y_{1} -y_{0})(w_{1} -w_{0}))\]</span> <span class="math display">\[E(y|z=0) = E(y_{0}) + E((y_{1} -y_{0})w_{0})\]</span></p></li>
<li><p>So, <span class="math display">\[E(y|z=1) - E(y|z=0) =  E((y_{1} -y_{0})(w_{1} -w_{0}))\]</span></p></li>
</ul>
</section>
<section id="local-average-treatment-effects-3" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>Note that <span class="math display">\[E((y_{1} -y_{0})(w_{1} -w_{0}))\]</span> <span class="math display">\[= E(y_{1} -y_{0}|w_{1} -w_{0} = 1)P(w_{1} -w_{0} = 1)\]</span> <span class="math display">\[- E(y_{1} -y_{0}|w_{1} -w_{0} = -1)P(w_{1} -w_{0} = -1)\]</span> <span class="math display">\[+0\times E(y_{1} -y_{0}|w_{1} -w_{0} = 0)P(w_{1} -w_{0} = 0)\]</span></p></li>
<li><p>The last term drops out since it is zero</p></li>
<li><p>Reduced form is the difference in treatment effect between two groups</p>
<ul>
<li><p><span class="math inline">\(E(y_{1} -y_{0}|w_{1} -w_{0} = 1)\)</span> is the treatment effect for “compliers”</p>
<ul>
<li>Compliers have <span class="math inline">\(w_{1}=1\)</span> and <span class="math inline">\(w_{0} = 0\)</span>, so that <span class="math inline">\(w_{1} -w_{0} = 1\)</span></li>
</ul></li>
<li><p><span class="math inline">\(E(y_{1} -y_{0}|w_{1} -w_{0} = -1)\)</span> is the treatment effect for “defiers”</p>
<ul>
<li>Defiers have <span class="math inline">\(w_{1}=0\)</span> and <span class="math inline">\(w_{0} = 1\)</span>, so that <span class="math inline">\(w_{1} -w_{0} = -1\)</span></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="local-average-treatment-effects-4" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>Problem: reduced form might be 0 even with positive treatment effects for both groups</p>
<ul>
<li><p>Suppose <span class="math inline">\(E(y_{1} -y_{0}|w_{1} -w_{0} = 1) = E(y_{1} -y_{0}|w_{1} -w_{0} = -1)\)</span></p></li>
<li><p>Then <span class="math inline">\(E(y|z=1) - E(y|z=0) = 0\)</span> and reduced form effect is zero</p></li>
<li><p>Makes it difficult to measure treatment effects</p></li>
</ul></li>
<li><p>To correct for this, we must assume <strong>monotonicity</strong> <span class="math display">\[w_{1} \ge w_{0}\]</span></p>
<ul>
<li><p>Says effect of instrument goes one way</p></li>
<li><p>If assigned to treatment you take it, if not you don’t take it</p></li>
<li><p>Precludes defiers who don’t take treatment when assigned, take it when not assigned</p></li>
</ul></li>
</ul>
</section>
<section id="local-average-treatment-effects-5" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>Monotonicity implies <span class="math inline">\(P(w_{i1} -w_{i0} = -1) = 0\)</span>, so <span class="math display">\[E(y|z=1) - E(y|z=0)\]</span> <span class="math display">\[= E(y_{1} -y_{0}|w_{1} -w_{0} = 1)P(w_{1} -w_{0} = 1)\]</span></p></li>
<li><p>With monotonicity <span class="math inline">\((w_{1} -w_{0})\)</span> can equal 0 or 1, so</p>
<p><span class="math display">\[E(w_{1} - w_{0}) = 1\times P(w_{1} -w_{0} = 1) + 0\times P(w_{1} -w_{0} = 0)\]</span> <span class="math display">\[=P(w_{1} -w_{0} = 1)\]</span></p></li>
<li><p>Using this in the reduced form gives us</p>
<p><span class="math display">\[E(y|z=1) - E(y|z=0)\]</span> <span class="math display">\[= E(y_{1} -y_{0}|w_{1} -w_{0} = 1)E(w_{1} -w_{0})\]</span></p></li>
</ul>
</section>
<section id="local-average-treatment-effects-6" class="slide level2">
<h2>Local Average Treatment Effects</h2>
<ul>
<li><p>To derive the denominator, remember potential treatment are independent of <span class="math inline">\(z\)</span> <span class="math display">\[E(w |z=1) -E(w|z = 0) = E(w_{1} -w_{0})\]</span></p></li>
<li><p>Combining the numerator and denominator <span class="math display">\[\frac{E(y|z=1) - E(y|z=0)}{E(w|z=1) - E(w|z=0)} = \frac{E(y_{1} -y_{0}|w_{1} -w_{0} = 1)E(w_{1} -w_{0}) }{E(w_{1} -w_{0}) }\]</span></p>
<p><span class="math display">\[= E(y_{1} -y_{0}|w_{1} -w_{0} = 1)\]</span></p></li>
<li><p>Says the IV estimator equals <span class="math inline">\(E(y_{1} -y_{0}|w_{1} -w_{0} = 1)\)</span></p>
<ul>
<li><p>This is known as the <strong>Local Average Treatment Effect (LATE)</strong></p></li>
<li><p>The average treatment effect among compliers</p></li>
<li><p>Can interpret as treatment effect among people influenced by instrument</p></li>
</ul></li>
</ul>
</section>
<section id="examples-of-late" class="slide level2">
<h2>Examples of LATE</h2>
<ul>
<li><p>Smith (2009)</p>
<ul>
<li><p>Effect of school entry age on test scores</p></li>
<li><p>Uses “assigned entry age” as instrument for actual entry age</p></li>
<li><p>LATE: measures effect of entry age on test scores for people who follow rules</p></li>
</ul></li>
<li><p>Angrist (1990)</p>
<ul>
<li><p>Effect of military service on earnings</p></li>
<li><p>Uses draft eligibility as determined by lottery as instrument for military service</p></li>
<li><p>LATE: measures effect of military service for those who complied with the draft lottery</p></li>
</ul></li>
<li><p>Key: often the “complier” subpopulation is different from the average population</p>
<ul>
<li>So LATE <span class="math inline">\(\neq\)</span> ATE in general</li>
</ul></li>
</ul>
</section>
<section id="late-in-regression" class="slide level2">
<h2>LATE in Regression</h2>
<ul>
<li><p>An instrumental variables model without covariates is <span class="math display">\[y = \beta_{0} + \beta_{1}w + u\]</span> <span class="math display">\[w = \pi_{0} + \pi_{1}z + r\]</span></p></li>
<li><p>The reduced form for <span class="math inline">\(y\)</span> is therefore</p>
<p><span class="math display">\[y = \gamma_{0} + \gamma_{1}z + \epsilon\]</span></p></li>
<li><p>Taking expectations, <span class="math display">\[E(y|z = 1) = \gamma_{0} + E(\gamma_{1}|z = 1) +   E[\epsilon|z=1]\]</span> <span class="math display">\[E(y|z = 0) = \gamma_{0}  + E[\epsilon|z=0]\]</span></p></li>
</ul>
</section>
<section id="late-in-regression-1" class="slide level2">
<h2>LATE in Regression</h2>
<ul>
<li><p>Under the LATE assumptions, <span class="math display">\[E(y|z = 1) - E(y|z = 0) = E(\gamma_{1})\]</span></p></li>
<li><p>From the reduced form for <span class="math inline">\(w\)</span></p>
<p><span class="math display">\[E(w|z = 1) = \pi_{0} + E(\pi_{1}|z = 1) +   E[r|z=1]\]</span> <span class="math display">\[E(w|z = 0) = \pi_{0}  + E[r|z=0]\]</span></p></li>
<li><p>Taking the difference <span class="math display">\[E(w|z = 1) - E(w|z = 0) = E(\pi_{1})\]</span></p></li>
</ul>
</section>
<section id="late-in-regression-2" class="slide level2">
<h2>LATE in Regression</h2>
<ul>
<li><p>Taking the ratio <span class="math display">\[\frac{E(y|z = 1) - E(y|z = 0)}{E(w|z = 1) - E(w|z = 0)} = \frac{E(\gamma_{1})}{E(\pi_{1})}\]</span></p></li>
<li><p>Relating this back to late, note that <span class="math inline">\(\gamma = \beta_{1}\pi_{1}\)</span></p>
<p><span class="math display">\[\frac{E(\gamma_{1})}{E(\pi_{1})} =  \frac{E(\beta_{1}\pi_{1})}{E(\pi_{1})}\]</span></p></li>
<li><p>Using the monotonicity assumption</p>
<p><span class="math display">\[\frac{E(\beta_{1}\pi_{1})}{E(\pi_{1})} =  \frac{E(\beta_{1}|\pi_{1}&gt;0)P(\pi_{1}&gt;0)}{E(\pi_{1})} = E(\beta_{1}|\pi_{1}&gt;0)\]</span></p></li>
<li><p>Because <span class="math inline">\(P(\pi_{1}&gt;0)=E(\pi_{1})\)</span></p></li>
</ul>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="IV_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="IV_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="IV_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="IV_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="IV_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="IV_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="IV_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="IV_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="IV_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="IV_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="IV_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"theme":"whiteboard","src":"drawings.json"},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>